<ngx-page-title [title]="'page.management' | translate"></ngx-page-title>

<div class="row">

    <div class="col-lg-12">

        <nb-card status="info" *ngIf="participationStatus === 'CLOSE'">

            <nb-card-header>
                {{ 'participation.status.closed' | translate }}
            </nb-card-header>

        </nb-card>

        <nb-card *ngIf="participationStatus === 'OPEN'">

            <nb-card-header>

                <span>{{ 'participation.title.default' | translate }}</span>

                <div ngxAutoFloat class="btn-group btn-divided-group">

                    <button type="button" class="btn active btn-sm btn-primary" (click)="closeParticipation()">
                        {{ 'participation.action.close' | translate }}
                    </button>

                </div>

            </nb-card-header>

            <nb-card-body>

                <p [innerHTML]="'participation.text.toCloseParticipation' | translate"></p>

                <div class="alert alert-primary" role="alert">
                    <strong>{{ 'alert.attention' | translate }}</strong> {{ 'participation.alert.closeParticipation' | translate }}
                </div>

                <nb-card size="small" *ngIf="groupList.length > 0">

                    <nb-card-header>
                        {{ 'participation.title.groupsWithPendingParticipation' | translate }}
                    </nb-card-header>

                    <nb-card-body>

                        <nb-list>
                            <nb-list-item *ngFor="let group of groupList">
                                <a routerLink="/pages/group/detail/{{ group.name }}" class="text-heading">
                                    <b>{{ 'group.title.default' | translate }}:</b> {{ group.name }}
                                </a>
                            </nb-list-item>
                        </nb-list>

                    </nb-card-body>

                </nb-card>

            </nb-card-body>

        </nb-card>

    </div>

    <div class="col-lg-12">

        <nb-card>

            <nb-card-header>

                <span>{{ 'participation.title.resetParticipation' | translate }}</span>

                <div ngxAutoFloat class="btn-group btn-divided-group">

                    <button type="button" class="btn active btn-sm btn-danger" (click)="resetParticipation()">
                        {{ 'participation.action.reset' | translate }}
                    </button>

                </div>

            </nb-card-header>

            <nb-card-body>

                <div *ngIf="resetSuccess" class="alert alert-success" role="alert">
                    <strong>{{ 'alert.great' | translate }}</strong> {{ 'participation.alert.resetSuccess' | translate }}
                </div>

                <p [innerHTML]="'participation.text.toResetParticipation' | translate"></p>

                <div class="alert alert-danger" role="alert">
                    <strong>{{ 'alert.warning' | translate }}</strong> {{ 'participation.alert.resetParticipation' | translate }}
                </div>

            </nb-card-body>

        </nb-card>

    </div>

</div>
