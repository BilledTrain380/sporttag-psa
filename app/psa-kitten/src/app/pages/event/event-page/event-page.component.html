<ngx-page-title [title]="'page.event' | translate"></ngx-page-title>

<div class="row">

    <div class="col-lg-12">

        <nb-card>

            <nb-card-header>

                {{ 'eventPage.title.participantList' | translate }}

            </nb-card-header>

            <nb-card-body>

                <div class="row">

                    <div class="col-lg-12">

                        <ngx-tree-checkbox [root]="participantListTree"></ngx-tree-checkbox>

                    </div>

                </div>

                <button class="btn btn-primary mb-2" (click)="exportParticipantList()" [disabled]="isParticipantListLoading">
                    <span *ngIf="!isParticipantListLoading">{{ 'eventPage.action.export' | translate }}</span>
                    <i *ngIf="isParticipantListLoading" class="fa fa-spinner fa-spin"></i>
                </button>

            </nb-card-body>

        </nb-card>

    </div>

    <div class="col-lg-12">

        <nb-card>

            <nb-card-header>

                <span>{{ 'eventPage.title.eventSheets' | translate }}</span>

            </nb-card-header>

            <nb-card-body>

                <div class="row">

                    <div *ngIf="isParticipationOpen" class="col-lg-12">
                        <div class="alert alert-primary" role="alert">
                            <strong>{{ 'alert.info' | translate }}</strong> {{ 'participation.status.open' | translate }}.
                            <span *nbIsGranted="['view', 'management']">
                                {{ 'participation.text.toManagement' | translate }} <a routerLink="/pages/management">{{ 'participation.text.toManagementHere' | translate }}</a>.
                            </span>
                        </div>
                    </div>

                    <div class="col-lg-12">

                        <ngx-tree-checkbox [root]="eventSheetsTree"></ngx-tree-checkbox>

                    </div>

                </div>

                <button class="btn btn-primary mb-2" (click)="exportEventSheets()" [disabled]="isParticipationOpen">
                    <span *ngIf="!isEventSheetLoading">{{ 'eventPage.action.export' | translate }}</span>
                    <i *ngIf="isEventSheetLoading" class="fa fa-spinner fa-spin"></i>
                </button>

            </nb-card-body>

        </nb-card>

    </div>

</div>
