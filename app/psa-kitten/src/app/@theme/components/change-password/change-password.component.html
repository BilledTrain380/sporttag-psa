<form #userForm="ngForm" (ngSubmit)="submit(userForm)">

    <nb-card>

        <nb-card-header>
            {{ 'settings.users.action.changePassword' | translate }}
        </nb-card-header>

        <nb-card-body>

            <div class="row">

                <div class="col-sm-12">
                    <div class="form-group input-group-fill-only">
                        <label for="inputUsername">{{ 'settings.users.label.username' | translate }}</label>
                        <input type="text" readonly class="form-control" id="inputUsername" [value]="user.username">
                    </div>
                </div>

                <div class="col-sm-12">

                    <div class="form-group">
                        <label for="inputPassword">{{ 'settings.users.label.password' | translate }}</label>
                        <div class="input-group">

                            <input [type]="isPasswordRevealed ? 'text' : 'password'" class="form-control" id="inputPassword"
                                   name="password"
                                   ngModel
                                   #password="ngModel"
                                   [ngClass]="{ 'form-control-danger': password.dirty && password.invalid }"
                                   [pattern]="passwordPolicyRegex"
                                   required>

                            <div class="input-group-append">

                                <button class="btn btn-outline-secondary" type="button" (click)="togglePasswordReveal()">
                                    <i *ngIf="!isPasswordRevealed" class="fa fa-eye"></i>
                                    <i *ngIf="isPasswordRevealed" class="fa fa-eye-slash"></i>
                                </button>

                            </div>

                        </div>

                        <small *ngIf="password.dirty && password.invalid" class="form-text">
                            {{ 'form.validation.pattern' | translate }}
                        </small>

                        <div class="mt-2 alert alert-info" [innerHTML]="'settings.users.text.passwordRequirements' | translate"></div>

                    </div>

                </div>

            </div>

        </nb-card-body>

        <nb-card-footer>

            <div ngxAutoFloat class="btn-group btn-divided-group">

                <button class="btn btn-md btn-secondary" type="button" (click)="dismissModal()">
                    {{ 'form.action.abort' | translate }}
                </button>

                <button class="btn btn-md btn-primary active" [disabled]="userForm.invalid" type="submit">
                    {{ 'form.action.save' | translate }}
                </button>

            </div>

        </nb-card-footer>

    </nb-card>

</form>
